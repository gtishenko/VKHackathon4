{"ast":null,"code":"import _regeneratorRuntime from\"/Users/gregorytyshchenko/Desktop/\\u0443\\u044F\\u0437\\u0432\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C/VK-Apps-Image-Example/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/gregorytyshchenko/Desktop/\\u0443\\u044F\\u0437\\u0432\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C/VK-Apps-Image-Example/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/gregorytyshchenko/Desktop/\\u0443\\u044F\\u0437\\u0432\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C/VK-Apps-Image-Example/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/gregorytyshchenko/Desktop/\\u0443\\u044F\\u0437\\u0432\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C/VK-Apps-Image-Example/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/gregorytyshchenko/Desktop/\\u0443\\u044F\\u0437\\u0432\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C/VK-Apps-Image-Example/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/gregorytyshchenko/Desktop/\\u0443\\u044F\\u0437\\u0432\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C/VK-Apps-Image-Example/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import bridge from'@vkontakte/vk-bridge';import{Avatar,Button,Div,FormLayout,Group,Header,Input,Panel,PanelHeader,PanelHeaderContent,Text,View}from'@vkontakte/vkui';import'@vkontakte/vkui/dist/vkui.css';var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.getImage=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var image;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:image=document.getElementById('url').value;console.log({image:image});if(image){_this.setState({image:image});}case 3:case\"end\":return _context.stop();}}},_callee);}));_this.state={user:null};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;bridge.send('VKWebAppGetUserInfo',{}).then(function(user){_this2.setState({user:user});});}},{key:\"render\",value:function render(){var _this$state=this.state,user=_this$state.user,image=_this$state.image;return/*#__PURE__*/React.createElement(View,{activePanel:\"main\"},/*#__PURE__*/React.createElement(Panel,{id:\"main\"},/*#__PURE__*/React.createElement(PanelHeader,null,user?/*#__PURE__*/React.createElement(PanelHeaderContent,{status:\"VK Apps Image Example\",before:/*#__PURE__*/React.createElement(Avatar,{size:36,src:user.photo_100})},user.first_name):'VK Apps Image Example'),/*#__PURE__*/React.createElement(Group,{header:/*#__PURE__*/React.createElement(Header,{mode:\"secondary\"},\"\\u0417\\u0430\\u0434\\u0430\\u043D\\u0438\\u0435\")},/*#__PURE__*/React.createElement(Div,null,\"\\u0423 \\u043D\\u0430\\u0441 \\u0435\\u0441\\u0442\\u044C \\u043C\\u0438\\u043D\\u0438-\\u043F\\u0440\\u0438\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0435, \\u043A\\u043E\\u0442\\u043E\\u0440\\u043E\\u0435 \\u0438\\u043C\\u0435\\u0435\\u0442 \\u0432\\u043E\\u0437\\u043C\\u043E\\u0436\\u043D\\u043E\\u0441\\u0442\\u044C \\u0437\\u0430\\u0433\\u0440\\u0443\\u0436\\u0430\\u0442\\u044C \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F \\u043F\\u043E \\u0432\\u043D\\u0435\\u0448\\u043D\\u0435\\u0439 \\u0441\\u0441\\u044B\\u043B\\u043A\\u0435. \\u0423\\u0432\\u044B, \\u0432 \\u043F\\u0440\\u0438\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0438 \\u0434\\u043E\\u043F\\u0443\\u0449\\u0435\\u043D\\u0430 \\u043E\\u0448\\u0438\\u0431\\u043A\\u0430, \\u0438\\u0437-\\u0437\\u0430 \\u0447\\u0435\\u0433\\u043E \\u0443\\u0434\\u0430\\u043B\\u0435\\u043D\\u043D\\u044B\\u0439 \\u0441\\u0435\\u0440\\u0432\\u0435\\u0440 \\u043F\\u043E\\u043B\\u0443\\u0447\\u0430\\u0435\\u0442 \\u043F\\u0430\\u0440\\u0430\\u043C\\u0435\\u0442\\u0440\\u044B \\u0437\\u0430\\u043F\\u0443\\u0441\\u043A\\u0430 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0435\\u0439, \\u043A\\u043E\\u0442\\u043E\\u0440\\u044B\\u0435 \\u0432\\u0441\\u0442\\u0430\\u0432\\u043B\\u044F\\u044E\\u0442 \\u0441\\u0441\\u044B\\u043B\\u043A\\u0443. \\u041D\\u0443\\u0436\\u043D\\u043E \\u043E\\u0431\\u044A\\u044F\\u0441\\u043D\\u0438\\u0442\\u044C \\u043F\\u043E\\u0447\\u0435\\u043C\\u0443 \\u0442\\u0430\\u043A \\u043F\\u0440\\u043E\\u0438\\u0441\\u0445\\u043E\\u0434\\u0438\\u0442 \\u0438 \\u0438\\u0441\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u0441\\u0438\\u0442\\u0443\\u0430\\u0446\\u0438\\u044E \\u043A\\u0440\\u0430\\u0441\\u0438\\u0432\\u043E \\u0438 \\u043B\\u0430\\u043A\\u043E\\u043D\\u0438\\u0447\\u043D\\u043E.\"),/*#__PURE__*/React.createElement(Div,null,\"\\u0414\\u043B\\u044F \\u043E\\u0431\\u043B\\u0435\\u0433\\u0447\\u0435\\u043D\\u0438\\u044F \\u0442\\u0435\\u0441\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u044F \\u043C\\u043E\\u0436\\u043D\\u043E \\u0438\\u0441\\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u044C \\u043A\\u0430\\u0440\\u0442\\u0438\\u043D\\u043A\\u0443 \",/*#__PURE__*/React.createElement(Text,{weight:\"semibold\"},\"https://service.pavel.im/image\"),\" (good code \\u2014 \\u0432\\u0441\\u0435 \\u043A\\u0440\\u0443\\u0442\\u043E, bad code \\u2014 \\u0441\\u0435\\u0440\\u0432\\u0435\\u0440 \\u043F\\u043E\\u043B\\u0443\\u0447\\u0438\\u043B \\u043F\\u0430\\u0440\\u0430\\u043C\\u0435\\u0442\\u0440\\u044B \\u0437\\u0430\\u043F\\u0443\\u0441\\u043A\\u0430)\"),/*#__PURE__*/React.createElement(FormLayout,null,/*#__PURE__*/React.createElement(Input,{type:\"text\",id:\"url\"}),/*#__PURE__*/React.createElement(Button,{size:\"xl\",onClick:this.getImage},\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C\")),!!image&&/*#__PURE__*/React.createElement(Div,{style:{textAlign:'center'}},/*#__PURE__*/React.createElement(\"img\",{src:image,alt:\"remote file\",rel:\"noreferrer\"})))));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/Users/gregorytyshchenko/Desktop/уязвимость/VK-Apps-Image-Example/src/App.js"],"names":["React","bridge","Avatar","Button","Div","FormLayout","Group","Header","Input","Panel","PanelHeader","PanelHeaderContent","Text","View","App","props","getImage","image","document","getElementById","value","console","log","setState","state","user","send","then","photo_100","first_name","textAlign","Component"],"mappings":"y2CAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,OACIC,MADJ,CAEIC,MAFJ,CAGIC,GAHJ,CAIIC,UAJJ,CAKIC,KALJ,CAMIC,MANJ,CAOIC,KAPJ,CAQIC,KARJ,CASIC,WATJ,CAUIC,kBAVJ,CAWIC,IAXJ,CAYIC,IAZJ,KAaO,iBAbP,CAeA,MAAO,+BAAP,C,GAEMC,CAAAA,G,sGAEL,aAAYC,KAAZ,CAAmB,qCAClB,uBAAMA,KAAN,EADkB,MAenBC,QAfmB,sEAeR,6IACEC,KADF,CACUC,QAAQ,CAACC,cAAT,CAAwB,KAAxB,EAA+BC,KADzC,CAGJC,OAAO,CAACC,GAAR,CAAY,CAACL,KAAK,CAALA,KAAD,CAAZ,EAEA,GAAIA,KAAJ,CAAW,CAChB,MAAKM,QAAL,CAAc,CAAEN,KAAK,CAALA,KAAF,CAAd,EACA,CAPS,sDAfQ,GAGlB,MAAKO,KAAL,CAAa,CACZC,IAAI,CAAE,IADM,CAAb,CAHkB,aAMlB,C,6EAEmB,iBACnBxB,MAAM,CAACyB,IAAP,CAAY,qBAAZ,CAAmC,EAAnC,EACEC,IADF,CACO,SAACF,IAAD,CAAU,CACf,MAAI,CAACF,QAAL,CAAc,CAAEE,IAAI,CAAJA,IAAF,CAAd,EACA,CAHF,EAIA,C,uCAYQ,iBACgB,KAAKD,KADrB,CACAC,IADA,aACAA,IADA,CACMR,KADN,aACMA,KADN,CAGR,mBACU,oBAAC,IAAD,EAAM,WAAW,CAAC,MAAlB,eACI,oBAAC,KAAD,EAAO,EAAE,CAAC,MAAV,eACI,oBAAC,WAAD,MAEQQ,IAAI,cACA,oBAAC,kBAAD,EACI,MAAM,CAAC,uBADX,CAEI,MAAM,cAAG,oBAAC,MAAD,EAAQ,IAAI,CAAG,EAAf,CAAoB,GAAG,CAAGA,IAAI,CAACG,SAA/B,EAFb,EAIMH,IAAI,CAACI,UAJX,CADA,CAQxB,uBAVY,CADJ,cAeI,oBAAC,KAAD,EAAO,MAAM,cAAG,oBAAC,MAAD,EAAQ,IAAI,CAAC,WAAb,+CAAhB,eACd,oBAAC,GAAD,okDADc,cAId,oBAAC,GAAD,wUAC8E,oBAAC,IAAD,EAAM,MAAM,CAAC,UAAb,mCAD9E,4QAJc,cAQI,oBAAC,UAAD,mBACI,oBAAC,KAAD,EAAO,IAAI,CAAC,MAAZ,CAAmB,EAAE,CAAC,KAAtB,EADJ,cAGI,oBAAC,MAAD,EAAQ,IAAI,CAAC,IAAb,CAAkB,OAAO,CAAG,KAAKb,QAAjC,2DAHJ,CARJ,CAeb,CAAC,CAACC,KAAF,eACA,oBAAC,GAAD,EAAK,KAAK,CAAE,CAAEa,SAAS,CAAE,QAAb,CAAZ,eACyB,2BAAK,GAAG,CAAGb,KAAX,CAAmB,GAAG,CAAC,aAAvB,CAAqC,GAAG,CAAC,YAAzC,EADzB,CAhBa,CAfJ,CADJ,CADV,CAyCA,C,iBAvEgBjB,KAAK,CAAC+B,S,EA2ExB,cAAejB,CAAAA,GAAf","sourcesContent":["import React from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport {\n    Avatar,\n    Button,\n    Div,\n    FormLayout,\n    Group,\n    Header,\n    Input,\n    Panel,\n    PanelHeader,\n    PanelHeaderContent,\n    Text,\n    View\n} from '@vkontakte/vkui';\n\nimport '@vkontakte/vkui/dist/vkui.css';\n\nclass App extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tuser: null\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tbridge.send('VKWebAppGetUserInfo', {})\n\t\t\t.then((user) => {\n\t\t\t\tthis.setState({ user });\n\t\t\t});\n\t}\n\n\tgetImage = async () => {\n        const image = document.getElementById('url').value;\n\n        console.log({image});\n\n        if (image) {\n\t\t\tthis.setState({ image });\n\t\t}\n\t};\n\n\trender() {\n\t\tconst { user, image } = this.state;\n\n\t\treturn (\n            <View activePanel=\"main\">\n                <Panel id=\"main\">\n                    <PanelHeader>\n\t\t\t\t\t\t{\n                            user ?\n                                <PanelHeaderContent\n                                    status=\"VK Apps Image Example\"\n                                    before={ <Avatar size={ 36 } src={ user.photo_100 } /> }\n                                >\n                                    { user.first_name }\n                                </PanelHeaderContent>\n\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t'VK Apps Image Example'\n\t\t\t\t\t\t}\n                    </PanelHeader>\n\n                    <Group header={ <Header mode=\"secondary\">Задание</Header> }>\n\t\t\t\t\t\t<Div>\n\t\t\t\t\t\t\tУ нас есть мини-приложение, которое имеет возможность загружать изображения по внешней ссылке. Увы, в приложении допущена ошибка, из-за чего удаленный сервер получает параметры запуска пользователей, которые вставляют ссылку. Нужно объяснить почему так происходит и исправить ситуацию красиво и лаконично.\n\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t<Div>\n                            Для облегчения тестирования можно использовать картинку <Text weight=\"semibold\">https://service.pavel.im/image</Text> (good code — все круто, bad code — сервер получил параметры запуска)\n\t\t\t\t\t\t</Div>\n\n                        <FormLayout>\n                            <Input type=\"text\" id=\"url\" />\n\n                            <Button size=\"xl\" onClick={ this.getImage }>Загрузить</Button>\n                        </FormLayout>\n\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t!!image &&\n\t\t\t\t\t\t\t<Div style={{ textAlign: 'center' }}>\n                                <img src={ image } alt=\"remote file\" rel=\"noreferrer\" />\n\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t}\n                    </Group>\n                </Panel>\n            </View>\n\t\t);\n\t}\n\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}